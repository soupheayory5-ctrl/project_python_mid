<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Home | TechTrend</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/styles.css') }}" />
  <script src="https://unpkg.com/vue@3"></script>

  <style>
    /* ---- Global (light + patterns) ---- */
    body{
      font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:#0f172a;
      /* dotted + micro-dotted over soft gradient */
      background:
        radial-gradient(circle at 20px 20px, rgba(15,23,42,.06) 2px, transparent 2px) 0 0/40px 40px,
        radial-gradient(circle at 10px 10px, rgba(15,23,42,.04) 1px, transparent 1px) 0 0/20px 20px,
        linear-gradient(180deg, #ffffff, #f6fbff 65%, #eef6ff);
    }

    /* ---- Hero (striped pattern + color blobs) ---- */
    .hero{
      position:relative;
      text-align:center;
      padding:120px 0;
      color:#0b1324;
      background:
        radial-gradient(60% 80% at 15% 20%, rgba(99,102,241,.25), transparent 60%),
        radial-gradient(70% 90% at 85% 80%, rgba(16,185,129,.22), transparent 60%),
        repeating-linear-gradient(45deg, rgba(14,165,233,.15) 0 12px, rgba(14,165,233,0) 12px 24px),
        linear-gradient(135deg,#ffffff 0%,#f1f8ff 100%);
      border-bottom:1px solid rgba(15,23,42,.08);
    }
    .hero h1{
      font-size:3rem; font-weight:800; letter-spacing:.4px;
      background:linear-gradient(90deg,#2563eb,#ec4899);
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .hero p{ color:#334155; }
    .hero .btn{
      border:none; border-radius:999px; padding:12px 28px; font-weight:700;
      color:#0f172a; background:
        linear-gradient(90deg,#60a5fa,#34d399);
      box-shadow:0 8px 20px rgba(37,99,235,.2);
      transition:transform .2s ease, box-shadow .2s ease, filter .2s ease;
    }
    .hero .btn:hover{ transform:translateY(-2px); filter:saturate(1.1); box-shadow:0 12px 28px rgba(37,99,235,.28); }

    /* ---- Section titles ---- */
    h2.text-light{ color:#0f172a !important; }
    .section-title{
      display:inline-flex; align-items:center; gap:.5rem;
      padding:.35rem .85rem; border-radius:999px;
      background:linear-gradient(90deg, rgba(99,102,241,.15), rgba(236,72,153,.15));
      border:1px solid rgba(15,23,42,.08);
    }

    /* ---- Product cards (top stripe + grid pattern) ---- */
    .product-card{
      border-radius:18px; overflow:hidden; border:1px solid rgba(15,23,42,.08);
      background:
        repeating-linear-gradient(0deg, rgba(15,23,42,.03) 0 2px, transparent 2px 4px),
        #ffffff;
      transition:transform .25s ease, box-shadow .25s ease;
      box-shadow:0 3px 10px rgba(15,23,42,.06);
    }
    .product-card::before{
      content:"";
      display:block; height:6px;
      background:linear-gradient(90deg,#2563eb,#22c55e,#f59e0b,#ec4899);
    }
    .product-card:hover{
      transform:translateY(-6px);
      box-shadow:0 12px 26px rgba(15,23,42,.12);
    }
    .product-card img{
      height:220px; object-fit:contain; padding:18px;
      background:
        radial-gradient(circle at 30% 20%, rgba(59,130,246,.12), transparent 40%),
        radial-gradient(circle at 70% 80%, rgba(16,185,129,.12), transparent 45%),
        linear-gradient(#f8fbff,#ffffff);
    }
    .product-card .card-body{ color:#0f172a; }
    .product-card .badge{
      background:linear-gradient(90deg,#fde68a,#fca5a5);
      color:#7c2d12; border:1px solid rgba(124,45,18,.25);
    }
    .product-card .btn{
      border-radius:10px; font-weight:700; color:#0f172a;
      background:linear-gradient(90deg,#a78bfa,#60a5fa);
      border:none;
    }
    .product-card .btn:hover{ filter:saturate(1.1) brightness(1.02); }

    /* ---- About (checker pattern band) ---- */
    .about-preview{
      padding:90px 0; color:#0f172a;
      background:
        linear-gradient(#ffffff,#ffffff) padding-box,
        repeating-linear-gradient(45deg, #e2e8f0 0 10px, #ffffff 10px 20px) border-box;
      border-top:10px solid transparent; /* reveals the checker border with gradient background */
    }
    .about-preview h2{ color:#111827; }
    .about-preview .btn{
      border-radius:999px; padding:10px 24px; font-weight:700;
      color:#0f172a; border:2px solid transparent; background:
        linear-gradient(#fff,#fff) padding-box,
        linear-gradient(90deg,#34d399,#60a5fa,#f472b6) border-box;
      transition: transform .2s ease;
    }
    .about-preview .btn:hover{ transform:translateY(-2px); }

    /* Small helper so badges & buttons donâ€™t inherit Bootstrap dark overrides */
    .text-light{ color:#0f172a !important; }
  </style>
</head>

<body class="d-flex flex-column min-vh-100">
  <div id="app" class="d-flex flex-column flex-fill">

    {% include 'Layout/navbar.html' %}

    <main class="flex-fill">
      <!-- Hero -->
      <section class="hero">
        <div class="container text-center">
          <h1>Soul.kh Has everthing that you want</h1>
          <p class="lead">We are into all Cambodia People heart</p>
          <a href="/product" class="btn mt-4">See Something new</a>
        </div>
      </section>

      <!-- Featured Products -->
      <section class="py-5">
        <div class="container">
          <h2 class="text-center fw-bold mb-5 text-light">
            <span class="section-title">Best Seller Now</span>
          </h2>

          {% if products %}
          <div class="row g-4">
            {% for product in products %}
            <div class="col-12 col-md-4 col-lg-3">
              <div class="card product-card h-100 text-center">
                <img src="{{ product.image or '' }}" alt="{{ product.title }}">
                <div class="card-body">
                  <h5 class="card-title" title="{{ product.title }}">{{ product.title }}</h5>
                  <span class="badge mb-2">{{ product.category or 'Uncategorized' }}</span>
                  <p class="card-text fw-bold">$ {{ '%.2f'|format(product.price or 0) }}</p>
                  <a href="{{ url_for('product_detail.product_detail', product_id=product.id) }}" class="btn w-100">
                    View Product
                  </a>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
          {% else %}
            <div class="text-center text-muted py-5">
              <p class="mb-3">No products yet.</p>
              <a href="{{ url_for('admin.dashboard') }}" class="btn btn-outline-info">Add products in Admin</a>
            </div>
          {% endif %}
        </div>
      </section>

      <!-- About -->
      <section class="about-preview text-center">
        <div class="container">
          <h2 class="mb-3">Who We Are</h2>
          <p class="lead mb-4">Soul is your everthing.</p>
          <a href="/about" class="btn">Learn More</a>
        </div>
      </section>
    </main>
  </div>

  <script>
    const app = Vue.createApp({
      data() { return { cartCount: 0 }; },
      mounted() {
        this.updateCartCount();
        window.addEventListener('storage', this.updateCartCount);
      },
      methods: {
        updateCartCount() {
          const cart = JSON.parse(localStorage.getItem('cart_list') || '[]');
          this.cartCount = cart.reduce((sum, item) => sum + (item.quantity || 0), 0);
        }
      }
    });
    app.mount('#app');
  </script>

  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
