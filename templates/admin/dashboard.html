{% extends "Layout/base.html" %}
{% block title %}Admin Â· Dashboard{% endblock %}

{% block content %}
<style>
  /* ===== Background Pattern ===== */
  body {
    background:
      radial-gradient(circle at 15% 25%, rgba(59,130,246,.12) 0, transparent 40%),
      radial-gradient(circle at 85% 75%, rgba(16,185,129,.12) 0, transparent 40%),
      repeating-linear-gradient(135deg, #f0f9ff 0 30px, #e0f2fe 30px 60px),
      linear-gradient(180deg, #ffffff, #f8fafc);
  }

  .dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(240px,1fr));
    gap: 20px;
    margin: 20px 0;
  }

  .stat-card {
    border-radius: 16px;
    padding: 22px;
    background:
      repeating-linear-gradient(-45deg, rgba(99,102,241,.08) 0 22px, transparent 22px 44px),
      #ffffff;
    border: 2px solid #e2e8f0;
    box-shadow: 0 10px 20px rgba(15,23,42,.08);
    transition: transform .2s ease, box-shadow .2s ease;
  }
  .stat-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 14px 28px rgba(15,23,42,.12);
  }
  .stat-title {
    font-size: .95rem;
    font-weight: 600;
    color: #475569;
    margin-bottom: 6px;
  }
  .stat-value {
    font-size: 1.9rem;
    font-weight: 800;
    background: linear-gradient(90deg,#2563eb,#ec4899);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  .btn-primary {
    font-weight: 700;
    border-radius: 12px;
    background:
      repeating-linear-gradient(45deg,#3b82f6 0 20px,#2563eb 20px 40px);
    border: none;
    padding: 10px 18px;
    transition: transform .2s ease, filter .2s ease;
  }
  .btn-primary:hover {
    transform: translateY(-2px);
    filter: brightness(1.05);
    box-shadow: 0 6px 16px rgba(37,99,235,.4);
  }

  .newest-product {
    background:
      repeating-linear-gradient(135deg,#fef3c7 0 24px,#fffbeb 24px 48px),
      #fff;
    padding: 18px;
    border-radius: 14px;
    border: 1px solid #fcd34d;
    box-shadow: 0 6px 16px rgba(251,191,36,.25);
  }
  .newest-product h3 {
    font-weight: 800;
    margin-bottom: 8px;
    background: linear-gradient(90deg,#f59e0b,#ef4444);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }
</style>

<h1 class="fw-bold mb-4">ðŸ“Š Admin Dashboard</h1>

<div class="dashboard-grid">
  <div class="stat-card">
    <div class="stat-title">Total products</div>
    <div class="stat-value">{{ total_products }}</div>
  </div>
  <div class="stat-card">
    <div class="stat-title">Categories</div>
    <div class="stat-value">{{ category_count }}</div>
  </div>
  <div class="stat-card">
    <div class="stat-title">Average price</div>
    <div class="stat-value">
      {% if avg_price is not none %}${{ '%.2f'|format(avg_price) }}{% else %}â€”{% endif %}
    </div>
  </div>
</div>

<div class="my-3">
  <a href="{{ url_for('admin.products_index') }}" class="btn btn-primary">Manage Products â†’</a>
</div>

{% if newest %}
  <div class="newest-product mt-4">
    <h3>Newest product</h3>
    <p><strong>{{ newest.title }}</strong> â€” ${{ '%.2f'|format(newest.price) }}</p>
    <p>{{ newest.description[:160] }}{% if newest.description|length > 160 %}â€¦{% endif %}</p>
  </div>
{% endif %}
{% endblock %}
